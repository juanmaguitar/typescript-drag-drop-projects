(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();var f=(s=>(s.Active="active",s.Finished="finished",s))(f||{});class j{constructor(e,r,i,t,n){this.id=e,this.title=r,this.description=i,this.people=t,this.status=n}}class v{constructor(){this.listeners=[]}}class d extends v{constructor(){super(),this.projects=[]}static getInstance(){return this.instance?this.instance:(this.instance=new d,this.instance)}addListener(e){this.listeners.push(e)}addProject(e,r,i){const t=new j(Math.random().toString(),e,r,i,f.Active);this.projects.push(t),this.updateListeners()}moveProject(e,r){const i=this.projects.find(t=>t.id===e);i&&i.status!==r&&(i.status=r,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}class p{constructor(e,r,i,t){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(r);const n=document.importNode(this.templateElement.content,!0);this.element=n.firstElementChild,t&&(this.element.id=t),this.attach(i)}attach(e=!1){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function a(s){let e=!0;return s.required&&(e=e&&s.value.toString().trim().length!==0),s.minLength!=null&&typeof s.value=="string"&&(e=e&&s.value.length>=s.minLength),s.maxLength!=null&&typeof s.value=="string"&&(e=e&&s.value.length<=s.maxLength),s.min!=null&&typeof s.value=="number"&&(e=e&&s.value>=s.min),s.max!=null&&typeof s.value=="number"&&(e=e&&s.value<=s.max),e}function l(s,e,r){const i=r.value;return{configurable:!0,get(){return i.bind(this)}}}var y=Object.defineProperty,P=Object.getOwnPropertyDescriptor,E=(s,e,r,i)=>{for(var t=P(e,r),n=s.length-1,o;n>=0;n--)(o=s[n])&&(t=o(e,r,t)||t);return t&&y(e,r,t),t};class m extends p{get persons(){return this.project.people===1?"1 person":`${this.project.people} persons`}constructor(e,r){super("single-project",e,!1,r.id),this.project=r,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("DragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=`${this.persons} assigned`,this.element.querySelector("p").textContent=this.project.description}}E([l],m.prototype,"dragStartHandler");var L=Object.defineProperty,S=Object.getOwnPropertyDescriptor,u=(s,e,r,i)=>{for(var t=S(e,r),n=s.length-1,o;n>=0;n--)(o=s[n])&&(t=o(e,r,t)||t);return t&&L(e,r,t),t};class c extends p{constructor(e,r){super("project-list","app",!1,`${e}-projects`),this.type=e,this.projectState=r,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&e.dataTransfer.types[0]==="text/plain"&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const r=e.dataTransfer.getData("text/plain");this.projectState.moveProject(r,this.type)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("drop",this.dropHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.projectState.addListener(e=>{const r=e.filter(i=>i.status===this.type);this.assignedProjects=r,this.renderProjects()})}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){const e=document.getElementById(`${this.type}-projects-list`);e.innerHTML="";for(const r of this.assignedProjects)new m(this.element.querySelector("ul").id,r)}}u([l],c.prototype,"dragOverHandler");u([l],c.prototype,"dropHandler");u([l],c.prototype,"dragLeaveHandler");var O=Object.defineProperty,_=Object.getOwnPropertyDescriptor,H=(s,e,r,i)=>{for(var t=_(e,r),n=s.length-1,o;n>=0;n--)(o=s[n])&&(t=o(e,r,t)||t);return t&&O(e,r,t),t};class g extends p{constructor(e){super("project-input","app",!0,"user-input"),this.projectState=e,this.configure()}configure(){this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,r=this.descriptionInputElement.value,i=this.peopleInputElement.value,t={value:e,required:!0},n={value:r,required:!0,minLength:5},o={value:+i,required:!0,min:1,max:5};if(!a(t)||!a(n)||!a(o)){alert("Invalid input, please try again!");return}else return[e,r,+i]}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const r=this.gatherUserInput();if(Array.isArray(r)){const[i,t,n]=r;this.projectState.addProject(i,t,n),this.clearInputs()}}}H([l],g.prototype,"submitHandler");const h=d.getInstance(),q=new g(h),x=new c("active",h),C=new c("finished",h);console.log(q);console.log(x);console.log(C);
